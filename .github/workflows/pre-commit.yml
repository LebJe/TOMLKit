name: "Run Pre-Commit"

on: "pull_request"

jobs:
    PreCommit:
        runs-on: "macos-latest"
        steps:
            - uses: "actions/checkout@v2"
              with:
                token: ${{ secrets.PRE_COMMIT_TOKEN }}
            - name: "Checkout PR"
              env:
                GITHUB_TOKEN: ${{ secrets.PRE_COMMIT_TOKEN }}
              run: "gh pr checkout ${{ github.event.pull_request.number }}"
            - name: "Run Pre-Commit"
              run: |
                  brew bundle
                  pre-commit run --all-files || true
            - name: "Push Changes"
              env:
                GITHUB_TOKEN: ${{ secrets.PRE_COMMIT_TOKEN }}
              run: "git add . && git commit -m \"Run pre-commit\" && git push"